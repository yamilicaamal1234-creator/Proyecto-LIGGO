@page "/inscriptions"
@inject AuthService Auth
@inject NavigationManager Nav

<div class="space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700">
    <div class="flex items-center justify-between">
        <div>
            <h1 class="text-3xl font-black text-[#0A1F44]">Inscripciones</h1>
            <p class="text-slate-500 font-medium">Gestión de membresías y planes activos.</p>
        </div>
        <button class="bg-[#0B6623] hover:bg-[#0A1F44] text-white px-6 py-3 rounded-xl font-bold transition-all shadow-lg shadow-[#0B6623]/20 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/></svg>
            Nueva Inscripción
        </button>
    </div>

    @* Listado de Inscripciones *@
    <div class="bg-white rounded-3xl shadow-[0_4px_20px_rgba(0,0,0,0.05)] border border-slate-50 overflow-hidden">
        <div class="overflow-x-auto">
            <table class="w-full text-left">
                <thead class="bg-slate-50/50 text-slate-400 text-xs font-bold uppercase tracking-widest">
                    <tr>
                        <th class="px-6 py-4">Jugador</th>
                        <th class="px-6 py-4">Plan</th>
                        <th class="px-6 py-4">Vigencia</th>
                        <th class="px-6 py-4">Monto</th>
                        <th class="px-6 py-4">Estado</th>
                        <th class="px-6 py-4">Acciones</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-50">
                    @foreach (var ins in MockInscriptions)
                    {
                        <tr class="hover:bg-slate-50/50 transition-colors">
                            <td class="px-6 py-5">
                                <span class="text-sm font-bold text-[#0A1F44]">@ins.PlayerName</span>
                            </td>
                            <td class="px-6 py-5">
                                <span class="px-3 py-1 bg-slate-100 rounded-full text-xs font-bold text-slate-600 uppercase">@ins.Plan</span>
                            </td>
                            <td class="px-6 py-5">
                                <div class="text-xs font-medium text-slate-500">
                                    <p>Desde: @ins.StartDate</p>
                                    <p>Hasta: @ins.EndDate</p>
                                </div>
                            </td>
                            <td class="px-6 py-5 text-sm font-black text-[#0A1F44]">$@ins.Amount</td>
                            <td class="px-6 py-5">
                                <StatusBadge Status="@ins.Status" />
                            </td>
                            <td class="px-6 py-5">
                                <button class="p-2 bg-slate-50 hover:bg-slate-100 rounded-xl transition-all">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-[#0A1F44]"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                                </button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

@code {
    private List<InscriptionModel> MockInscriptions = new()
    {
        new InscriptionModel { PlayerName = "Santiago Martínez", Plan = "Anual", Amount = 15000, StartDate = "2025-08-01", EndDate = "2026-07-31", Status = "activa" },
        new InscriptionModel { PlayerName = "Mateo López", Plan = "Semestral", Amount = 8000, StartDate = "2025-09-01", EndDate = "2026-02-28", Status = "por_vencer" },
        new InscriptionModel { PlayerName = "Valentina García", Plan = "Anual", Amount = 15000, StartDate = "2025-06-01", EndDate = "2026-05-31", Status = "activa" }
    };

    public class InscriptionModel
    {
        public string PlayerName { get; set; } = "";
        public string Plan { get; set; } = "";
        public int Amount { get; set; }
        public string StartDate { get; set; } = "";
        public string EndDate { get; set; } = "";
        public string Status { get; set; } = "";
    }

    protected override void OnInitialized()
    {
        if (!Auth.IsAuthenticated) Nav.NavigateTo("/login");
    }
}
