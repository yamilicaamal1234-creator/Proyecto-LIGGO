@page "/matches"
@inject AuthService Auth
@inject NavigationManager Nav

<div class="space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700">
    <div class="flex items-center justify-between">
        <div>
            <h1 class="text-3xl font-black text-[#0A1F44]">Partidos</h1>
            <p class="text-slate-500 font-medium">Calendario de encuentros y registro de resultados.</p>
        </div>
        <button class="bg-[#0A1F44] hover:bg-[#0B6623] text-white px-6 py-3 rounded-xl font-bold transition-all shadow-lg shadow-[#0A1F44]/20 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            Programar Partido
        </button>
    </div>

    <div class="grid gap-6">
        @foreach (var match in MockData.Matches)
        {
            <div class="group relative overflow-hidden rounded-3xl bg-white p-6 shadow-[0_4px_20px_rgba(0,0,0,0.05)] border border-slate-50 transition-all hover:shadow-[0_15px_30px_rgba(0,0,0,0.08)]">
                <div class="flex flex-col md:flex-row items-center justify-between gap-8">
                    @* Local *@
                    <div class="flex-1 text-center md:text-right">
                        <p class="text-lg font-black text-[#0A1F44]">@match.HomeTeam</p>
                        <p class="text-xs font-bold text-[#0B6623] uppercase tracking-widest mt-1">Local</p>
                    </div>

                    @* Marcador *@
                    <div class="flex flex-col items-center shrink-0 px-8 py-2 border-x border-slate-100">
                        <div class="flex items-center gap-4">
                            <span class="text-4xl font-black text-[#0A1F44]">@(match.HomeScore ?? 0)</span>
                            <span class="text-xl font-bold text-slate-300">-</span>
                            <span class="text-4xl font-black text-[#0A1F44]">@(match.AwayScore ?? 0)</span>
                        </div>
                        <div class="mt-2 text-center">
                            <StatusBadge Status="@match.Status" />
                        </div>
                    </div>

                    @* Visitante *@
                    <div class="flex-1 text-center md:text-left">
                        <p class="text-lg font-black text-[#0A1F44]">@match.AwayTeam</p>
                        <p class="text-xs font-bold text-[#0B6623] uppercase tracking-widest mt-1">Visitante</p>
                    </div>
                </div>

                @* Información Extra *@
                <div class="mt-6 pt-4 border-t border-slate-50 flex flex-wrap items-center justify-center gap-6 text-xs font-bold text-slate-400 uppercase tracking-widest">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
                        @match.Date
                    </div>
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
                        @match.Location
                    </div>
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 12 3 9l3-3"/><path d="m18 6 3 3-3 3"/><path d="M13 3l-2 18"/></svg>
                        @match.Category
                    </div>
                </div>

                @* Acciones Rápidas *@
                <div class="absolute right-4 top-4">
                    <button @onclick='() => Nav.NavigateTo($"/attendance/{match.Id}")' class="p-2 bg-[#0B6623]/5 hover:bg-[#0B6623] hover:text-white text-[#0B6623] rounded-xl transition-all shadow-sm" title="Tomar Asistencia">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
                    </button>
                </div>
            </div>
        }
    </div>
</div>

@code {
    protected override void OnInitialized()
    {
        if (!Auth.IsAuthenticated) Nav.NavigateTo("/login");
    }
}
