@page "/incidents"
@inject AuthService Auth
@inject NavigationManager Nav

<div class="space-y-8">
    <div class="flex items-center justify-between">
        <div>
            <h1 class="text-3xl font-black text-[#0A1F44]">Incidentes</h1>
            <p class="text-slate-500 font-medium">Reporte de sanciones, lesiones y eventos administrativos.</p>
        </div>
        <button class="bg-[#0A1F44] hover:bg-[#0B6623] text-white px-6 py-3 rounded-xl font-bold transition-all shadow-lg shadow-[#0A1F44]/20 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            Reportar Incidente
        </button>
    </div>

    @* Bit√°cora *@
    <div class="space-y-6">
        @foreach (var inc in MockData.Incidents)
        {
            var iconColor = inc.Type switch {
                "lesion" => "text-red-500 bg-red-50",
                "disciplina" => "text-amber-500 bg-amber-50",
                _ => "text-blue-500 bg-blue-50"
            };

            <div class="bg-white rounded-[2rem] p-6 shadow-[0_4px_20px_rgba(0,0,0,0.03)] border border-slate-50 transition-all hover:shadow-[0_15px_30px_rgba(0,0,0,0.05)]">
                <div class="flex items-start gap-6">
                    <div class="h-14 w-14 shrink-0 rounded-2xl flex items-center justify-center @iconColor">
                        @if (inc.Type == "lesion") {
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
                        } else if (inc.Type == "disciplina") {
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></svg>
                        } else {
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
                        }
                    </div>
                    
                    <div class="flex-1">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-xl font-black text-[#0A1F44]">@inc.Title</h3>
                                <p class="text-sm font-bold text-[#0B6623] mt-0.5">@inc.PlayerName</p>
                            </div>
                            <div class="text-right">
                                <p class="text-xs font-bold text-slate-400 uppercase tracking-widest">@inc.Date</p>
                                <StatusBadge Status="@inc.Status" />
                            </div>
                        </div>
                        <p class="mt-4 text-slate-500 font-medium leading-relaxed">@inc.Description</p>
                        
                        <div class="mt-6 pt-4 border-t border-slate-50 flex items-center justify-end gap-2">
                            <button class="px-4 py-2 rounded-xl text-xs font-bold text-[#0A1F44] hover:bg-slate-50 transition-colors">Resolver</button>
                            <button class="px-4 py-2 rounded-xl text-xs font-bold text-slate-400 hover:text-red-500 transition-colors">Eliminar</button>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

@code {
    protected override void OnInitialized()
    {
        if (!Auth.IsAuthenticated) Nav.NavigateTo("/login");
    }
}
